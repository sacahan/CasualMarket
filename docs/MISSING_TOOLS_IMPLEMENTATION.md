# CasualMarket å°šæœªå¯¦ä½œå·¥å…·æ¸…å–®

æœ¬æ–‡ä»¶è¨˜éŒ„äº† TWSEMCPServer å°ˆæ¡ˆä¸­å­˜åœ¨ä½† CasualMarket å°ˆæ¡ˆå°šæœªå¯¦ä½œçš„å·¥å…·åŠŸèƒ½ã€‚

## ğŸ“Š å¯¦ä½œé€²åº¦æ¦‚è¦½

- **å·²å¯¦ä½œ**: 21 å€‹å·¥å…· (13 + 8)
- **å°šæœªå¯¦ä½œ**: 12 å€‹å·¥å…· (20 - 8)
- **ç¸½è¨ˆ**: 33 å€‹å·¥å…·
- **å®Œæˆåº¦**: 63.6%

---

## âŒ å°šæœªå¯¦ä½œçš„å·¥å…· (12å€‹)

### ğŸ¢ Company/ESG Tools (5å€‹)

#### 1. `get_company_governance_info`

- **åŠŸèƒ½**: å–å¾—å…¬å¸æ²»ç†è³‡è¨Š
- **APIç«¯é»**: `/opendata/t187ap46_L_9`
- **åƒæ•¸**: `code: str` - å…¬å¸è‚¡ç¥¨ä»£ç¢¼
- **å›å‚³**: å…¬å¸æ²»ç†ç›¸é—œè³‡è¨Š

#### 2. `get_company_climate_management`

- **åŠŸèƒ½**: å–å¾—æ°£å€™ç›¸é—œç®¡ç†è³‡è¨Š
- **APIç«¯é»**: `/opendata/t187ap46_L_8`
- **åƒæ•¸**: `code: str` - å…¬å¸è‚¡ç¥¨ä»£ç¢¼
- **å›å‚³**: æ°£å€™ç®¡ç†æ”¿ç­–èˆ‡æªæ–½

#### 3. `get_company_risk_management`

- **åŠŸèƒ½**: å–å¾—é¢¨éšªç®¡ç†æ”¿ç­–è³‡è¨Š
- **APIç«¯é»**: `/opendata/t187ap46_L_19`
- **åƒæ•¸**: `code: str` - å…¬å¸è‚¡ç¥¨ä»£ç¢¼
- **å›å‚³**: é¢¨éšªç®¡ç†ç›¸é—œè³‡æ–™

#### 4. `get_company_supply_chain_management`

- **åŠŸèƒ½**: å–å¾—ä¾›æ‡‰éˆç®¡ç†è³‡è¨Š
- **APIç«¯é»**: `/opendata/t187ap46_L_13`
- **åƒæ•¸**: `code: str` - å…¬å¸è‚¡ç¥¨ä»£ç¢¼
- **å›å‚³**: ä¾›æ‡‰éˆç®¡ç†æ”¿ç­–èˆ‡å¯¦å‹™

#### 5. `get_company_info_security`

- **åŠŸèƒ½**: å–å¾—è³‡è¨Šå®‰å…¨è³‡æ–™
- **APIç«¯é»**: `/opendata/t187ap46_L_16`
- **åƒæ•¸**: `code: str` - å…¬å¸è‚¡ç¥¨ä»£ç¢¼
- **å›å‚³**: è³‡è¨Šå®‰å…¨ç®¡ç†è³‡è¨Š

---

### ğŸ“° News Tools (3å€‹)

#### 6. `get_company_major_news`

- **åŠŸèƒ½**: å–å¾—å…¬å¸é‡å¤§è¨Šæ¯
- **APIç«¯é»**: `/opendata/t187ap04_L`
- **åƒæ•¸**: `code: str = ""` - å…¬å¸è‚¡ç¥¨ä»£ç¢¼ (å¯é¸)
- **å›å‚³**: é‡å¤§è¨Šæ¯å…¬å‘Š
- **ç‰¹æ®ŠåŠŸèƒ½**: å¯æŸ¥è©¢ç‰¹å®šå…¬å¸æˆ–å…¨éƒ¨å…¬å¸çš„é‡å¤§è¨Šæ¯

#### 7. `get_twse_news`

- **åŠŸèƒ½**: å–å¾—è­‰äº¤æ‰€æ–°è
- **APIç«¯é»**: `/news/newsList`
- **åƒæ•¸**:
  - `start_date: str = ""` - é–‹å§‹æ—¥æœŸ (YYYYMMDD)
  - `end_date: str = ""` - çµæŸæ—¥æœŸ (YYYYMMDD)
- **å›å‚³**: è­‰äº¤æ‰€å®˜æ–¹æ–°è
- **ç‰¹æ®ŠåŠŸèƒ½**: æ”¯æ´æ—¥æœŸç¯„åœç¯©é¸ï¼Œè‡ªå‹•è™•ç†æ°‘åœ‹å¹´è½‰æ›

#### 8. `get_twse_events`

- **åŠŸèƒ½**: å–å¾—è­‰äº¤æ‰€æ´»å‹•è³‡è¨Š
- **APIç«¯é»**: `/news/eventList`
- **åƒæ•¸**: `top: int = 10` - è¿”å›ç­†æ•¸
- **å›å‚³**: è­‰äº¤æ‰€èˆ‰è¾¦çš„æ´»å‹•ã€ç ”ç¿’æœƒç­‰è³‡è¨Š

---

### ğŸ“ˆ Trading/Periodic Tools (3å€‹)

#### 9. `get_stock_monthly_average`

- **åŠŸèƒ½**: å–å¾—è‚¡ç¥¨æœˆå¹³å‡åƒ¹æ ¼
- **APIç«¯é»**: `/exchangeReport/STOCK_DAY_AVG_ALL`
- **åƒæ•¸**: `code: str` - è‚¡ç¥¨ä»£ç¢¼
- **å›å‚³**: æ—¥æ”¶ç›¤åƒ¹èˆ‡æœˆå¹³å‡åƒ¹æ ¼

#### 10. `get_stock_monthly_trading`

- **åŠŸèƒ½**: å–å¾—æœˆäº¤æ˜“è³‡è¨Š
- **APIç«¯é»**: `/exchangeReport/FMSRFK_ALL`
- **åƒæ•¸**: `code: str` - è‚¡ç¥¨ä»£ç¢¼
- **å›å‚³**: æœˆåº¦äº¤æ˜“çµ±è¨ˆè³‡æ–™

#### 11. `get_stock_yearly_trading`

- **åŠŸèƒ½**: å–å¾—å¹´äº¤æ˜“è³‡è¨Š
- **APIç«¯é»**: `/exchangeReport/FMNPTK_ALL`
- **åƒæ•¸**: `code: str` - è‚¡ç¥¨ä»£ç¢¼
- **å›å‚³**: å¹´åº¦äº¤æ˜“çµ±è¨ˆè³‡æ–™

---

### ğŸ’° Valuation Tools (1å€‹)

#### 12. `get_stock_valuation_ratios`

- **åŠŸèƒ½**: å–å¾—ä¼°å€¼æ¯”ç‡ (P/E, P/B, æ®–åˆ©ç‡)
- **APIç«¯é»**: `/exchangeReport/BWIBBU_ALL`
- **åƒæ•¸**: `code: str` - è‚¡ç¥¨ä»£ç¢¼
- **å›å‚³**: æœ¬ç›Šæ¯”ã€è‚¡åƒ¹æ·¨å€¼æ¯”ã€æ®–åˆ©ç‡ç­‰ä¼°å€¼æŒ‡æ¨™

---

### ğŸ« Warrant Tools (3å€‹)

#### 13. `get_warrant_basic_info`

- **åŠŸèƒ½**: å–å¾—æ¬Šè­‰åŸºæœ¬è³‡è¨Š
- **APIç«¯é»**: `/opendata/t187ap37_L`
- **åƒæ•¸**: `code: str = ""` - æ¬Šè­‰ä»£ç¢¼ (å¯é¸)
- **å›å‚³**: æ¬Šè­‰åŸºæœ¬è³‡æ–™ã€å±¥ç´„æ¢ä»¶ç­‰
- **ç‰¹æ®ŠåŠŸèƒ½**: å¯æŸ¥è©¢ç‰¹å®šæ¬Šè­‰æˆ–å…¨éƒ¨æ¬Šè­‰

#### 14. `get_warrant_daily_trading`

- **åŠŸèƒ½**: å–å¾—æ¬Šè­‰æ—¥äº¤æ˜“è³‡æ–™
- **APIç«¯é»**: `/opendata/t187ap42_L`
- **åƒæ•¸**: `code: str = ""` - æ¬Šè­‰ä»£ç¢¼ (å¯é¸)
- **å›å‚³**: æ¬Šè­‰æ—¥äº¤æ˜“é‡å€¼çµ±è¨ˆ
- **ç‰¹æ®ŠåŠŸèƒ½**: å¯æŸ¥è©¢ç‰¹å®šæ¬Šè­‰æˆ–å…¨éƒ¨æ¬Šè­‰

#### 15. `get_warrant_trader_count`

- **åŠŸèƒ½**: å–å¾—æ¬Šè­‰äº¤æ˜“äººæ•¸
- **APIç«¯é»**: `/opendata/t187ap43_L`
- **åƒæ•¸**: ç„¡
- **å›å‚³**: æ¯æ—¥æ¬Šè­‰äº¤æ˜“äººæ•¸çµ±è¨ˆ

---

### ğŸ’¸ Dividend Schedule Tools (1å€‹)

#### 16. `get_dividend_rights_schedule`

- **åŠŸèƒ½**: å–å¾—é™¤æ¬Šæ¯è¡Œäº‹æ›†
- **APIç«¯é»**: `/exchangeReport/TWT48U_ALL`
- **åƒæ•¸**: `code: str = ""` - è‚¡ç¥¨ä»£ç¢¼ (å¯é¸)
- **å›å‚³**: é™¤æ¬Šæ¯æ—¥æœŸã€é…è‚¡é…æ¯è³‡è¨Šç­‰
- **ç‰¹æ®ŠåŠŸèƒ½**: å¯æŸ¥è©¢ç‰¹å®šå…¬å¸æˆ–å…¨éƒ¨å…¬å¸çš„é™¤æ¬Šæ¯è³‡è¨Š

---

### ğŸŒ Market/Foreign Tools (4å€‹)

#### 17. `get_market_historical_index`

- **åŠŸèƒ½**: å–å¾—æ­·å²æŒ‡æ•¸è³‡æ–™
- **APIç«¯é»**: `/indicesReport/MI_5MINS_HIST`
- **åƒæ•¸**: ç„¡
- **å›å‚³**: TAIEX æ­·å²è³‡æ–™ï¼Œç”¨æ–¼é•·æœŸè¶¨å‹¢åˆ†æ

#### 18. `get_foreign_investment_by_industry`

- **åŠŸèƒ½**: å–å¾—å¤–è³‡æŒè‚¡(æŒ‰ç”¢æ¥­åˆ¥)
- **APIç«¯é»**: `/fund/MI_QFIIS_cat`
- **åƒæ•¸**: ç„¡
- **å›å‚³**: å„ç”¢æ¥­å¤–è³‡èˆ‡é™¸è³‡æŒè‚¡æ¯”ç‡çµ±è¨ˆ

#### 19. `get_top_foreign_holdings`

- **åŠŸèƒ½**: å–å¾—å¤–è³‡æŒè‚¡å‰20å
- **APIç«¯é»**: `/fund/MI_QFIIS_sort_20`
- **åƒæ•¸**: ç„¡
- **å›å‚³**: å¤–è³‡æŒè‚¡æ’åå‰20çš„å…¬å¸è©³ç´°è³‡è¨Š

---

## ğŸ› ï¸ å¯¦ä½œå»ºè­°

### å„ªå…ˆç´šåˆ†é¡

#### ğŸ”´ é«˜å„ªå…ˆç´š (æ ¸å¿ƒäº¤æ˜“åŠŸèƒ½)

1. `get_stock_valuation_ratios` - ä¼°å€¼åˆ†æå¿…å‚™
2. `get_dividend_rights_schedule` - è‚¡æ¯æŠ•è³‡ç­–ç•¥å¿…éœ€
3. `get_stock_monthly_trading` / `get_stock_yearly_trading` - é•·æœŸåˆ†æ
4. `get_foreign_investment_by_industry` / `get_top_foreign_holdings` - å¤–è³‡åˆ†æ

#### ğŸŸ¡ ä¸­å„ªå…ˆç´š (å¸‚å ´è³‡è¨Š)

1. `get_company_major_news` - é‡å¤§è¨Šæ¯å½±éŸ¿è‚¡åƒ¹
2. `get_market_historical_index` - å¸‚å ´è¶¨å‹¢åˆ†æ
3. `get_stock_monthly_average` - æŠ€è¡“åˆ†æåƒè€ƒ

#### ğŸŸ¢ ä½å„ªå…ˆç´š (é€²éšåŠŸèƒ½)

1. ESG ç›¸é—œå·¥å…· (5å€‹) - æ°¸çºŒæŠ•è³‡è¶¨å‹¢
2. æ¬Šè­‰ç›¸é—œå·¥å…· (3å€‹) - è¡ç”Ÿæ€§å•†å“
3. æ–°èæ´»å‹•å·¥å…· (2å€‹) - è³‡è¨Šæœå‹™

### å¯¦ä½œæ¶æ§‹

#### 1. æ–°å¢åˆ° FinancialAnalysisTool

- ESG ç›¸é—œå·¥å…·
- ä¼°å€¼åˆ†æå·¥å…·
- å¤–è³‡åˆ†æå·¥å…·

#### 2. æ–°å¢åˆ° server.py ä¸»è¦å·¥å…·

- æ–°èç›¸é—œå·¥å…·
- æ¬Šè­‰ç›¸é—œå·¥å…·
- é€±æœŸæ€§äº¤æ˜“è³‡æ–™å·¥å…·

#### 3. å»ºç«‹æ–°çš„å·¥å…·é¡åˆ¥

- `NewsAnalysisTool` - æ–°èèˆ‡å…¬å‘Šåˆ†æ
- `WarrantAnalysisTool` - æ¬Šè­‰åˆ†æ
- `ForeignInvestmentTool` - å¤–è³‡åˆ†æ

---

## ğŸ“‹ å¯¦ä½œæª¢æŸ¥æ¸…å–®

### Phase 1: æ ¸å¿ƒåŠŸèƒ½ (8å€‹å·¥å…·) âœ… å·²å®Œæˆ

- [x] `get_stock_valuation_ratios`
- [x] `get_dividend_rights_schedule`
- [x] `get_stock_monthly_trading`
- [x] `get_stock_yearly_trading`
- [x] `get_stock_monthly_average`
- [x] `get_foreign_investment_by_industry`
- [x] `get_top_foreign_holdings`
- [x] `get_market_historical_index`

### Phase 2: è³‡è¨Šæœå‹™ (7å€‹å·¥å…·)

- [ ] `get_company_major_news`
- [ ] `get_twse_news`
- [ ] `get_twse_events`
- [ ] `get_warrant_basic_info`
- [ ] `get_warrant_daily_trading`
- [ ] `get_warrant_trader_count`

### Phase 3: ESG èˆ‡æ²»ç† (5å€‹å·¥å…·)

- [ ] `get_company_governance_info`
- [ ] `get_company_climate_management`
- [ ] `get_company_risk_management`
- [ ] `get_company_supply_chain_management`
- [ ] `get_company_info_security`

---

## ğŸ”§ æŠ€è¡“è€ƒé‡

### API æ•´åˆ

- æ‰€æœ‰å·¥å…·éƒ½ä½¿ç”¨ç¾æœ‰çš„ `OpenAPIClient`
- é€é `@with_cache` è£é£¾å™¨æä¾›å¿«å–èˆ‡é€Ÿç‡é™åˆ¶
- çµ±ä¸€çš„éŒ¯èª¤è™•ç†èˆ‡æ—¥èªŒè¨˜éŒ„

### è³‡æ–™æ ¼å¼

- ç¶­æŒèˆ‡ç¾æœ‰å·¥å…·ä¸€è‡´çš„å›å‚³æ ¼å¼
- æä¾› `success/error` ç‹€æ…‹æŒ‡ç¤º
- åŒ…å« `source` æ¬„ä½æ¨™ç¤ºè³‡æ–™ä¾†æº

### æ¸¬è©¦ç­–ç•¥

- æ¯å€‹å·¥å…·éƒ½éœ€è¦å–®å…ƒæ¸¬è©¦
- æ•´åˆæ¸¬è©¦é©—è­‰ API é€£ç·š
- éŒ¯èª¤è™•ç†æ¸¬è©¦ç¢ºä¿ç©©å®šæ€§

---

_æœ€å¾Œæ›´æ–°: 2025-10-02_
_æ–‡ä»¶ç‰ˆæœ¬: 1.0_
